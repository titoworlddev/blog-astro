---
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';
import BottomNav from '../components/BottomNav.astro';
import FormattedDate from '../components/FormattedDate.astro';

export interface Props {
	title: string;
	description: string;
	category: string;
	pubDate: Date;
	updatedDate?: Date;
	image?: {
		src: string;
		width: number;
		height: number;
		format: string;
	};
}

const { title, description, category, pubDate, updatedDate, image } = Astro.props;

// Map category slug to display name
const categoryNames: Record<string, string> = {
	'desarrollo-web': 'Desarrollo Web',
	'bases-de-datos': 'Bases de Datos',
	'servidores': 'Servidores',
	'cloud-computing': 'Cloud Computing',
	'linea-de-comandos': 'LÃ­nea de Comandos',
	'inteligencia-artificial': 'Inteligencia Artificial'
};

const categoryDisplayName = categoryNames[category] || category;
---

<!doctype html>
<html lang="es">
	<head>
		<BaseHead title={title} description={description} />
	</head>

	<body>
		<Header title={title} showBackButton={true} />
		<main>
			<article class="blog-post">
				<div class="container">
					{image && (
						<div class="hero-image">
							<img src={image.src} alt={title} />
						</div>
					)}
					
					<div class="post-header">
						<div class="post-category">
							<a href={`/categoria/${category}`} class="category-link">
								{categoryDisplayName}
							</a>
						</div>
						<h1 class="post-title">{title}</h1>
						<div class="post-meta">
							<FormattedDate date={pubDate} />
							{updatedDate && (
								<div class="last-updated-on">
									Last updated on <FormattedDate date={updatedDate} />
								</div>
							)}
						</div>
					</div>
					
					<div class="post-content">
						<slot />
					</div>
				</div>
			</article>
		</main>
		<Footer />
		<BottomNav />
	</body>
</html>

<style>
	.blog-post {
		min-height: 100vh;
		padding: 2rem 0 4rem 0;
	}

	.hero-image {
		width: 100%;
		height: 300px;
		margin-bottom: 2rem;
		border-radius: 1rem;
		overflow: hidden;
	}

	.hero-image img {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	.post-header {
		margin-bottom: 2rem;
		text-align: center;
	}

	.post-category {
		margin-bottom: 1rem;
	}

	.category-link {
		display: inline-block;
		padding: 0.5rem 1rem;
		background-color: #4fd1c7;
		color: #1a1a1a;
		border-radius: 2rem;
		font-size: 0.9rem;
		font-weight: 500;
		text-decoration: none;
		transition: all 0.3s ease;
	}

	.category-link:hover {
		background-color: #6ee7dd;
		transform: translateY(-2px);
		box-shadow: 0 4px 12px rgba(79, 209, 199, 0.3);
	}

	.post-title {
		color: #ffffff;
		font-size: 2.5rem;
		font-weight: 700;
		margin-bottom: 1rem;
		line-height: 1.2;
	}

	.post-meta {
		color: #cccccc;
		font-size: 0.9rem;
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 0.5rem;
	}

	.last-updated-on {
		font-style: italic;
		color: #999999;
	}

	.post-content {
		color: #ffffff;
		line-height: 1.7;
		font-size: 1.1rem;
	}

	.post-content :global(h1),
	.post-content :global(h2),
	.post-content :global(h3),
	.post-content :global(h4),
	.post-content :global(h5),
	.post-content :global(h6) {
		color: #ffffff;
		margin-top: 2rem;
		margin-bottom: 1rem;
		font-weight: 600;
	}

	.post-content :global(h2) {
		font-size: 1.8rem;
		color: #4fd1c7;
		border-bottom: 2px solid #333;
		padding-bottom: 0.5rem;
	}

	.post-content :global(h3) {
		font-size: 1.4rem;
	}

	.post-content :global(p) {
		margin-bottom: 1.5rem;
		color: #e0e0e0;
	}

	.post-content :global(ul),
	.post-content :global(ol) {
		margin-bottom: 1.5rem;
		padding-left: 2rem;
	}

	.post-content :global(li) {
		margin-bottom: 0.5rem;
		color: #e0e0e0;
	}

	.post-content :global(strong) {
		color: #4fd1c7;
		font-weight: 600;
	}

	.post-content :global(code) {
		background-color: #333;
		color: #4fd1c7;
		padding: 0.2rem 0.4rem;
		border-radius: 0.3rem;
		font-size: 0.9rem;
	}

	.post-content :global(pre) {
		background-color: #1a1a1a;
		border: 1px solid #333;
		border-radius: 0.5rem;
		padding: 1rem;
		overflow-x: auto;
		margin-bottom: 1.5rem;
	}

	.post-content :global(blockquote) {
		border-left: 4px solid #4fd1c7;
		padding-left: 1rem;
		margin: 1.5rem 0;
		font-style: italic;
		color: #cccccc;
	}

	@media (max-width: 768px) {
		.post-title {
			font-size: 2rem;
		}
		
		.post-content {
			font-size: 1rem;
		}
		
		.hero-image {
			height: 200px;
		}
	}
</style>
